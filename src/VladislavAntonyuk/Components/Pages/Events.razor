@page "/events"
@using VladislavAntonyuk.Components.Navigation
@inherits VladislavAntonyukBaseComponent

<Head Title="Vladislav Antonyuk - Events" Description="Vladislav Antonyuk - Events" />

<EventsNavigationComponent>
	<ChildContent Context="events">
		<MudTimeline>
			@foreach (var @event in events.OrderByDescending(e => e.Date))
			{
				var url = urlCreator.Encode("events", @event.Name);
				<MudTimelineItem Color="Color.Primary" Icon="@Icons.Material.Filled.Event">
					<ItemOpposite>
						<MudStack Spacing="0">
							@if (@event.Date is not null)
							{
								<MudText Typo="Typo.subtitle1">@(@event.Date)</MudText>
							}

							@if (!string.IsNullOrWhiteSpace(@event.Location))
							{
								var mapUrl = $"https://www.google.com/maps?q={Uri.EscapeDataString(@event.Location)}";
								<MudLink Href="@mapUrl" Typo="Typo.subtitle1" Target="_blank">@(@event.Location)</MudLink>
							}
						</MudStack>
					</ItemOpposite>
					<ItemContent>
						<MudLink Href="@url">
							<MudPaper Class="pa-4" Elevation="1">
								<MudStack Spacing="1">
									<MudText Typo="Typo.h3" Class="mb-2">@(@event.Name)</MudText>
									@if (!string.IsNullOrWhiteSpace(@event.Image))
									{
										<MudImage Src="@(@event.Image)" Alt="@(@event.Name)" ObjectFit="ObjectFit.ScaleDown" Style="max-height:450px" />
									}
									
									<MudText Typo="Typo.body1">Go to event details...</MudText>
								</MudStack>
							</MudPaper>
						</MudLink>
					</ItemContent>
				</MudTimelineItem>
			}
		</MudTimeline>
	</ChildContent>
</EventsNavigationComponent>